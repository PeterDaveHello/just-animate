!function(){"use strict";function t(){}function n(t,n){return t+"("+h(arguments,1).join(",")+")"}function e(t,n,e){return n+e.toUpperCase()}function i(t,n){for(var e=0,i=t.length;i>e;e++){var r=n[e];r!==w&&(t[e]=n[e])}return t}function r(t,n,e){for(var i=0,r=t.length;r>i;i++){var a=t[i];(e||a===w)&&(t[i]=n)}return t}function a(t){return!t||t.length<1?w:t[0]}function s(t){return!f(t)&&c(t.length)}function o(t){return t!==w&&null!==t&&""!==t}function u(t){return"[object Function]"===T.call(t)}function c(t){return"number"==typeof t}function f(t){return"string"==typeof t}function h(t,n){return E.call(t,n||0)}function p(t,n){for(var e=0,i=t.length;i>e;e++)n(t[e])}function m(t,n){for(var e="",i=0,r=t.length;r>i;i++){var a=t[i],s=a[n];s>e&&(e=s)}return e}function l(t,n){for(var e=[],i=0,r=t.length;r>i;i++){var a=n(t[i]);o(a)&&e.push(a)}return e}function _(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];for(var i=1,r=arguments.length;r>i;i++){var a=arguments[i];for(var s in a)t[s]=a[s]}return t}function y(t,n,e,i){for(var r=[],a=[],s=0,c=t.length;c>s;s++)try{var f=t[s],h=void 0;h=n?f[n].apply(f,e):f.apply(w,e),o(h)&&a.push(h)}catch(t){r.push(t)}return u(i)&&i(r),a}function v(t){throw new Error("invalid parameter: "+t)}function g(t){var n=l(t.keyframes,k);return{keyframes:d(n),name:t.name,timings:_({},t.timings)}}function d(t){var n=t.length;if(2>n)return t;var e=t[0];0!==e.offset&&(e.offset=0);var i=t[n-1];1!==i.offset&&(i.offset=1);for(var r=n-1,a=1;r>a;a++){var s=t[a];if(!c(s.offset))for(var u=a+1;n>u;u++)if(c(t[u].offset)){for(var f=t[a-1].offset,h=t[u].offset,p=h-f,m=u-a+1,l=1;m>l;l++)t[l-1+a].offset=l/u*p+f;a=u;break}}for(var a=1;n>a;a++){var _=t[a];for(var y in _)y===x||o(e[y])||(e[y]=_[y])}for(var a=n-2;a>-1;a--){var _=t[a];for(var y in _)y===x||o(i[y])||(i[y]=_[y])}return t}function k(t){var a=[w,w,w],u=[w,w],h=[w,w,w,w],p=[w,w,w],m={};for(var l in t){var _=t[l];if(o(_))switch(l){case V:m[l]=_;continue;case P:if(c(_)){i(a,[_,_,_]);continue}if(s(_)){var y=_;3!==y.length&&v(P),i(a,y);continue}v(P);case F:if(s(_)){var y=_;2!==y.length&&v(F),i(a,[y[R],y[C],w]);continue}if(c(_)){i(a,[_,_,w]);continue}v(F);case Q:c(_)||v(Q),a[R]=_;continue;case q:c(_)||v(q),a[C]=_;continue;case M:c(_)&&v(M),a[S]=_;continue;case X:if(c(_)){i(u,[_,_]);continue}if(s(_)){var y=_;2===y.length&&i(u,y),v(X);continue}v(X);case Y:if(f(_)){u[R]=_;continue}v(Y);case z:if(f(_)){u[C]=_;continue}v(z);case B:if(s(_)){var y=_;4===y.length&&i(h,y)}v(B);case N:if(f(_)){i(h,[1,0,0,_]);continue}v(N);case J:if(f(_)){i(h,[0,1,0,_]);continue}v(J);case Z:case U:if(f(_)){i(h,[0,0,1,_]);continue}v(U);case D:if(f(_)||c(_)){i(p,[_,_,_]);continue}if(s(_)){var y=_;3!==y.length&&v(D),i(p,y);continue}v(D);case G:if(f(_)||c(_)){i(p,[_,_,w]);continue}if(s(_)){var y=_;2!==y.length&&v(G),i(p,[y[R],y[C],w]);continue}v(G);case H:if(f(_)||c(_)){p[R]=_;continue}v(H);case K:if(f(_)||c(_)){p[C]=_;continue}v(K);case L:if(f(_)||c(_)){p[S]=_;continue}v(L);default:var g=l.replace(O,e);m[g]=_;continue}}var d=[];return a.some(o)&&d.push(n(P,a)),p.some(o)&&d.push(n(D,r(p,0))),u.some(o)&&d.push(n(X,r(u,0))),h.some(o)&&d.push(n(B,r(h,0))),d.length&&(m[V]=d.join(" ")),m}function b(t){if(!t)throw Error("missing elements");if(f(t)){var n=document.querySelectorAll(t);return h(n)}if(t instanceof Element)return[t];if(u(t)){var e=t,i=e();return b(i)}if(s(t)){var r=[];return p(t,function(t){var n=b(t);r.push.apply(r,n)}),r}return[]}function I(){return o(st)||(st=new at),st}var T=Object.prototype.toString,E=Array.prototype.slice,w=void 0,O=/([a-z])-([a-z])/gi,R=0,C=1,S=2,A="cubic-bezier",j="duration",x="offset",P="scale3d",F="scale",Q="scaleX",q="scaleY",M="scaleZ",X="skew",Y="skewX",z="skewY",B="rotate3d",Z="rotate",N="rotateX",J="rotateY",U="rotateZ",D="translate3d",G="translate",H="translateX",K="translateY",L="translateZ",V="transform",W={easeInBack:[.6,-.28,.735,.045],easeInCirc:[.6,.04,.98,.335],easeInCubic:[.55,.055,.675,.19],easeInExpo:[.95,.05,.795,.035],easeInOutBack:[.68,-.55,.265,1.55],easeInOutCirc:[.785,.135,.15,.86],easeInOutCubic:[.645,.045,.355,1],easeInOutExpo:[1,0,0,1],easeInOutQuad:[.455,.03,.515,.955],easeInOutQuart:[.77,0,.175,1],easeInOutQuint:[.86,0,.07,1],easeInOutSine:[.445,.05,.55,.95],easeInQuad:[.55,.085,.68,.53],easeInQuart:[.895,.03,.685,.22],easeInQuint:[.755,.05,.855,.06],easeInSine:[.47,0,.745,.715],easeOutBack:[.175,.885,.32,1.275],easeOutCirc:[.075,.82,.165,1],easeOutCubic:[.215,.61,.355,1],easeOutExpo:[.19,1,.22,1],easeOutQuad:[.25,.46,.45,.94],easeOutQuart:[.165,.84,.44,1],easeOutQuint:[.23,1,.32,1],easeOutSine:[.39,.575,.565,1],elegantSlowStartEnd:[.175,.885,.32,1.275]},$=function(){function t(t,e,i,r){var a=this;if(e){var s;if(f(e)){var o=t.findAnimation(e);s=o.keyframes,r=_({},o.timings,r)}else s=d(l(e,k));if(r&&r.easing){var u=W[r.easing];u&&(r.easing=n(A,u))}this.duration=r.duration;var c=b(i);this._animators=y(c,"animate",[s,r]),this._animators.length>0&&(this._animators[0].onfinish=function(){a.finish()})}}return Object.defineProperty(t.prototype,"playbackRate",{get:function(){var t=a(this._animators);return t?t.playbackRate:0},set:function(t){p(this._animators,function(n){return n.playbackRate=t})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentTime",{get:function(){return m(this._animators,"currentTime")||0},set:function(t){p(this._animators,function(n){return n.currentTime=t})},enumerable:!0,configurable:!0}),t.prototype.finish=function(t){var n=this;return y(this._animators,"finish",[],t),this.playbackRate<0?p(this._animators,function(t){return t.currentTime=0}):p(this._animators,function(t){return t.currentTime=n.duration}),u(this.onfinish)&&this.onfinish(this),this},t.prototype.play=function(t){return y(this._animators,"play",[],t),this},t.prototype.pause=function(t){return y(this._animators,"pause",[],t),this},t.prototype.reverse=function(t){return y(this._animators,"reverse",[],t),this},t.prototype.cancel=function(t){return y(this._animators,"cancel",[],t),p(this._animators,function(t){return t.currentTime=0}),u(this.oncancel)&&this.oncancel(this),this},t}(),tt=function(){function n(n,e){var i=l(e.steps,function(t){if(t.command||!t.name)return t;var e=n.findAnimation(t.name),i=_({},e.timings);return t.timings&&(i=_(i,t.timings)),{el:t.el,keyframes:e.keyframes,timings:e.timings}});this.onfinish=t,this._currentIndex=-1,this._manager=n,this._steps=i,e.autoplay===!0&&this.play()}return Object.defineProperty(n.prototype,"currentTime",{get:function(){var t=this._currentIndex,n=this._steps.length;if(-1===t||t===n)return 0;for(var e,i=-1===this.playbackRate,r=0,a=0,s=0;n>s;s++){var o=this._steps[s];t>s?r+=o.timings.duration:s>t?a+=o.timings.duration:e=i?this.duration-o.animator.currentTime:o.animator.currentTime}return e+(i?a:r)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"duration",{get:function(){return this._steps.reduce(function(t,n){return t+(n.timings.duration||0)},0)},enumerable:!0,configurable:!0}),n.prototype.finish=function(t){this._errorCallback=t,this._currentIndex=-1;for(var n=0;n<this._steps.length;n++){var e=this._steps[n];o(e.animator)&&e.animator.cancel(t)}return u(this.onfinish)&&this.onfinish(this),this},n.prototype.play=function(t){return this._errorCallback=t,this.playbackRate=1,this._playThisStep(),this},n.prototype.pause=function(t){if(this._errorCallback=t,!this._isInEffect())return this;var n=this._getAnimator();return n.pause(t),this},n.prototype.reverse=function(t){return this._errorCallback=t,this.playbackRate=-1,this._playThisStep(),this},n.prototype.cancel=function(t){this._errorCallback=t,this.playbackRate=w,this._currentIndex=-1;for(var n=0;n<this._steps.length;n++){var e=this._steps[n];o(e.animator)&&e.animator.cancel(t)}return u(this.oncancel)&&this.oncancel(this),this},n.prototype._isInEffect=function(){return this._currentIndex>-1&&this._currentIndex<this._steps.length},n.prototype._getAnimator=function(){var t=this._steps[this._currentIndex];return t.animator?t.animator:(t.animator=this._manager.animate(t.keyframes,t.el,t.timings),t.animator)},n.prototype._playNextStep=function(t){this._currentIndex+=-1===this.playbackRate?-1:1,this._isInEffect()?this._playThisStep():this.onfinish(t)},n.prototype._playThisStep=function(){var t=this;this._isInEffect()||(this._currentIndex=-1===this.playbackRate?this._steps.length-1:0);var n=this._getAnimator();n.onfinish=function(n){t._playNextStep(n)},n.play(this._errorCallback)},n}(),nt=1/30,et=function(){function t(t,n){var e=n.duration;o(e)||v(j),this.playbackRate=0,this.duration=n.duration,this.currentTime=0,this._events=l(n.events,function(n){return new it(t,e,n)}),this._isPaused=!1,this._manager=t,this._tick=this._tick.bind(this),n.autoplay&&this.play()}return t.prototype.finish=function(t){return this._isFinished=!0,this},t.prototype.play=function(t){return this.playbackRate=1,this._isPaused=!1,this._isInEffect?this:(this.playbackRate<0?this.currentTime=this.duration:this.currentTime=0,window.requestAnimationFrame(this._tick),this)},t.prototype.pause=function(t){return this._isInEffect&&(this._isPaused=!0),this},t.prototype.reverse=function(t){return this.playbackRate=-1,this._isPaused=!1,this._isInEffect?this:(this.currentTime<=0&&(this.currentTime=this.duration),window.requestAnimationFrame(this._tick),this)},t.prototype.cancel=function(t){return this.playbackRate=0,this._isCanceled=!0,this},t.prototype._tick=function(){var t=this;if(this._isCanceled)return void this._triggerCancel();if(this._isFinished)return void this._triggerFinish();if(this._isPaused)return void this._triggerPause();this._isInEffect||(this._isInEffect=!0);var n=performance.now(),e=this._lastTick;if(o(e)){var i=(n-e)*this.playbackRate;this.currentTime+=i}return this._lastTick=n,this.currentTime>this.duration||this.currentTime<0?void this._triggerFinish():(p(this._events,function(n){var e=t.playbackRate<0?n.startTimeMs:n.startTimeMs+nt,i=t.playbackRate>=0?n.endTimeMs:n.endTimeMs-nt,r=e<=t.currentTime&&t.currentTime<i;return r?(n.animator.playbackRate=t.playbackRate,n.isInEffect=!0,void n.animator.play()):void(n.isInEffect=!1)}),void window.requestAnimationFrame(this._tick))},t.prototype._triggerFinish=function(){this._reset(),p(this._events,function(t){return t.animator.finish()}),u(this.onfinish)&&this.onfinish(this)},t.prototype._triggerCancel=function(){this._reset(),p(this._events,function(t){return t.animator.cancel()}),u(this.oncancel)&&this.oncancel(this)},t.prototype._triggerPause=function(){this._isPaused=!0,this._isInEffect=!1,this._lastTick=w,this.playbackRate=0,p(this._events,function(t){t.isInEffect=!1,t.animator.pause()})},t.prototype._reset=function(){this.currentTime=0,this._lastTick=w,this._isCanceled=!1,this._isFinished=!1,this._isPaused=!1,this._isInEffect=!1,p(this._events,function(t){t.isInEffect=!1})},t}(),it=function(){function t(t,n,e){var i,r,a;if(e.name){var s=t.findAnimation(e.name),o=_({},s.timings);e.timings&&(r=_(o,e.timings)),i=s.keyframes,r=o,a=e.el}else i=e.keyframes,r=e.timings,a=e.el;var u=n*e.offset,c=u+r.duration,f=c>n;f&&(c=n),this.el=a,this.isClipped=f,this.isInEffect=!1,this.endTimeMs=c,this.keyframes=i,this.offset=e.offset,this.startTimeMs=u,this.timings=r,this._manager=t}return Object.defineProperty(t.prototype,"animator",{get:function(){return o(this._animator)||(this._animator=this._manager.animate(this.keyframes,this.el,this.timings),this._animator.pause()),this._animator},enumerable:!0,configurable:!0}),t}(),rt=[],at=function(){function t(){var t=this;this._registry={},p(rt,function(n){return t._registry[n.name]=n})}return t.inject=function(t){Array.prototype.push.apply(rt,l(t,g))},t.prototype.animate=function(t,n,e){return new $(this,t,n,e)},t.prototype.animateSequence=function(t){return new tt(this,t)},t.prototype.animateTimeline=function(t){return new et(this,t)},t.prototype.findAnimation=function(t){return this._registry[t]||void 0},t.prototype.register=function(t){return this._registry[t.name]=g(t),this},t}();"undefined"!=typeof angular&&angular.module("just.animate",[]).service("just",at);var st=void 0,ot={animate:function(t,n,e){return I().animate(t,n,e)},animateSequence:function(t){return I().animateSequence(t)},animateTimeline:function(t){return I().animateTimeline(t)},findAnimation:function(t){return I().findAnimation(t)},inject:function(t){at.inject(t)},register:function(t){return I().register(t)}};window.Just=ot}();