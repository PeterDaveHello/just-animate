!function(){"use strict";function t(){}function e(t,e){for(var i=0,n=t.length;n>i;i++){var r=e[i];r!==O&&(t[i]=e[i])}return t}function i(t,e,i){for(var n=0,r=t.length;r>n;n++){var a=t[n];i&&a!==O||(t[n]=e)}return t}function n(t){return!t||t.length<1?O:t[0]}function r(t){return!u(t)&&o(t.length)}function a(t){return t!==O&&null!==t&&""!==t}function s(t){return"[object Function]"===E.call(t)}function o(t){return"number"==typeof t}function u(t){return"string"==typeof t}function c(t,e){return w.call(t,e||0)}function f(t,e){for(var i=0,n=t.length;n>i;i++)e(t[i])}function h(t,e){for(var i="",n=0,r=t.length;r>n;n++){var a=t[n],s=a[e];s>i&&(i=s)}return i}function p(t,e){for(var i=[],n=0,r=t.length;r>n;n++){var s=e(t[n]);a(s)&&i.push(s)}return i}function m(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var n=1,r=arguments.length;r>n;n++){var a=arguments[n];for(var s in a)t[s]=a[s]}return t}function l(t,e,i,n){for(var r=[],o=[],u=0,c=t.length;c>u;u++)try{var f=t[u],h=void 0;h=e?f[e].apply(f,i):f.apply(void 0,i),a(h)&&o.push(h)}catch(t){r.push(t)}return s(n)&&n(r),o}function _(t){throw new Error("invalid parameter: "+t)}function y(t,e,i){return e+i.toUpperCase()}function v(t,e){return t+"("+c(arguments,1).join(",")+")"}function g(t){var e=p(t.keyframes,k);return{keyframes:d(e),name:t.name,timings:m({},t.timings)}}function d(t){var e=t.length;if(2>e)return t;var i=t[0];0!==i.offset&&(i.offset=0);var n=t[e-1];1!==n.offset&&(n.offset=1);for(var r=e-1,s=1;r>s;s++){var u=t[s];if(!o(u.offset))for(var c=s+1;e>c;c++)if(o(t[c].offset)){for(var f=t[s-1].offset,h=t[c].offset,p=h-f,m=c-s+1,l=1;m>l;l++)t[l-1+s].offset=l/c*p+f;s=c;break}}for(var s=1;e>s;s++){var _=t[s];for(var y in _)y===S||a(i[y])||(i[y]=_[y])}for(var s=e-2;s>-1;s--){var _=t[s];for(var y in _)y===S||a(n[y])||(n[y]=_[y])}return t}function k(t){var n=[O,O,O],s=[O,O],c=[O,O,O,O],f=[O,O,O],h={};for(var p in t){var m=t[p];if(a(m))switch(p){case A:if(o(m)){e(n,[m,m,m]);continue}if(r(m)){var l=m;3!==l.length&&_(A),e(n,l);continue}_(A);case P:if(r(m)){var l=m;2!==l.length&&_(P),e(n,[l[C],l[j],O]);continue}if(o(m)){e(n,[m,m,O]);continue}_(P);case F:o(m)||_(F),n[C]=m;break;case Q:o(m)||_(Q),n[j]=m;break;case q:o(m)&&_(q),n[x]=m;break;case M:if(o(m)){e(s,[m,m]);continue}if(r(m)){var l=m;2===l.length&&e(s,l),_(M);continue}_(M);case z:if(u(m)){s[C]=m;continue}_(z);case X:if(u(m)){s[j]=m;continue}_(X);case Y:if(r(m)){var l=m;4===l.length&&e(c,l)}_(Y);case Z:if(u(m)){e(c,[1,0,0,m]);continue}_(Z);case N:if(u(m)){e(c,[0,1,0,m]);continue}_(N);case B:case D:if(u(m)){e(c,[0,0,1,m]);continue}_(D);case J:if(u(m)||o(m)){e(f,[m,m,m]);continue}if(r(m)){var l=m;3!==l.length&&_(J),e(f,l);continue}_(J);case U:if(u(m)||o(m)){e(f,[m,m,O]);continue}if(r(m)){var l=m;2!==l.length&&_(U),e(f,[l[C],l[j],O]);continue}_(U);case G:if(u(m)||o(m)){f[C]=m;continue}_(G);case H:if(u(m)||o(m)){f[j]=m;continue}_(H);case K:if(u(m)||o(m)){f[x]=m;continue}_(K);case L:f.push(m);break;default:var g=p.replace(R,y);h[g]=m}}var d=[];return n.some(a)&&(d[A]=v(A,n)),f.some(a)&&(f[J]=v(J,i(f,0))),s.some(a)&&(d[M]=v(M,i(s,0))),c.some(a)&&(f[J]=v(B,i(c,0))),d.length&&(h[L]=d.join(" ")),h}function b(t,e,i,n){return"cubic-bezier("+[t,e,i,n].join(" ")+")"}function I(t){if(!t)throw Error("source is undefined");if(u(t)){var e=document.querySelectorAll(t);return c(e)}if(t instanceof Element)return[t];if(s(t)){var i=t,n=i();return I(n)}if(r(t)){var a=[];return f(t,function(t){var e=I(t);a.push.apply(a,e)}),a}return[]}function T(){return a(at)||(at=new rt),at}var E=Object.prototype.toString,w=Array.prototype.slice,O=void 0;Object.freeze(O);var R=/([a-z])-([a-z])/gi,C=0,j=1,x=2,S="offset",A="scale3d",P="scale",F="scaleX",Q="scaleY",q="scaleZ",M="skew",z="skewX",X="skewY",Y="rotate3d",B="rotate",Z="rotateX",N="rotateY",D="rotateZ",J="translate3d",U="translate",G="translateX",H="translateY",K="translateZ",L="transform",V={easeInBack:b(.6,-.28,.735,.045),easeInCirc:b(.6,.04,.98,.335),easeInCubic:b(.55,.055,.675,.19),easeInExpo:b(.95,.05,.795,.035),easeInOutBack:b(.68,-.55,.265,1.55),easeInOutCirc:b(.785,.135,.15,.86),easeInOutCubic:b(.645,.045,.355,1),easeInOutExpo:b(1,0,0,1),easeInOutQuad:b(.455,.03,.515,.955),easeInOutQuart:b(.77,0,.175,1),easeInOutQuint:b(.86,0,.07,1),easeInOutSine:b(.445,.05,.55,.95),easeInQuad:b(.55,.085,.68,.53),easeInQuart:b(.895,.03,.685,.22),easeInQuint:b(.755,.05,.855,.06),easeInSine:b(.47,0,.745,.715),easeOutBack:b(.175,.885,.32,1.275),easeOutCirc:b(.075,.82,.165,1),easeOutCubic:b(.215,.61,.355,1),easeOutExpo:b(.19,1,.22,1),easeOutQuad:b(.25,.46,.45,.94),easeOutQuart:b(.165,.84,.44,1),easeOutQuint:b(.23,1,.32,1),easeOutSine:b(.39,.575,.565,1),elegantSlowStartEnd:b(.175,.885,.32,1.275)},W=function(){function t(t,e,i,n){var r=this;if(e){var a;if(u(e)){var s=t.findAnimation(e);a=s.keyframes,n=m({},s.timings,n)}else a=d(p(e,k));if(n&&n.easing){var o=V[n.easing];o&&(n.easing=o)}this.duration=n.duration;var c=I(i);this._animators=l(c,"animate",[a,n]),this._animators.length>0&&(this._animators[0].onfinish=function(){r.finish()})}}return Object.defineProperty(t.prototype,"playbackRate",{get:function(){var t=n(this._animators);return t?t.playbackRate:0},set:function(t){f(this._animators,function(e){return e.playbackRate=t})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentTime",{get:function(){return h(this._animators,"currentTime")||0},set:function(t){f(this._animators,function(e){return e.currentTime=t})},enumerable:!0,configurable:!0}),t.prototype.finish=function(t){var e=this;return l(this._animators,"finish",[],t),this.playbackRate<0?f(this._animators,function(t){return t.currentTime=0}):f(this._animators,function(t){return t.currentTime=e.duration}),s(this.onfinish)&&this.onfinish(this),this},t.prototype.play=function(t){return l(this._animators,"play",[],t),this},t.prototype.pause=function(t){return l(this._animators,"pause",[],t),this},t.prototype.reverse=function(t){return l(this._animators,"reverse",[],t),this},t.prototype.cancel=function(t){return l(this._animators,"cancel",[],t),f(this._animators,function(t){return t.currentTime=0}),s(this.oncancel)&&this.oncancel(this),this},t}(),$=function(){function e(e,i){var n=p(i.steps,function(t){if(t.command||!t.name)return t;var i=e.findAnimation(t.name),n=m({},i.timings);return t.timings&&(n=m(n,t.timings)),{el:t.el,keyframes:i.keyframes,timings:i.timings}});this.onfinish=t,this._currentIndex=-1,this._manager=e,this._steps=n,i.autoplay===!0&&this.play()}return Object.defineProperty(e.prototype,"currentTime",{get:function(){var t=this._currentIndex,e=this._steps.length;if(-1===t||t===e)return 0;for(var i,n=-1===this.playbackRate,r=0,a=0,s=0;e>s;s++){var o=this._steps[s];t>s?r+=o.timings.duration:s>t?a+=o.timings.duration:i=n?this.duration-o.animator.currentTime:o.animator.currentTime}return i+(n?a:r)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this._steps.reduce(function(t,e){return t+(e.timings.duration||0)},0)},enumerable:!0,configurable:!0}),e.prototype.finish=function(t){this._errorCallback=t,this._currentIndex=-1;for(var e=0;e<this._steps.length;e++){var i=this._steps[e];a(i.animator)&&i.animator.cancel(t)}return s(this.onfinish)&&this.onfinish(this),this},e.prototype.play=function(t){return this._errorCallback=t,this.playbackRate=1,this._playThisStep(),this},e.prototype.pause=function(t){if(this._errorCallback=t,!this._isInEffect())return this;var e=this._getAnimator();return e.pause(t),this},e.prototype.reverse=function(t){return this._errorCallback=t,this.playbackRate=-1,this._playThisStep(),this},e.prototype.cancel=function(t){this._errorCallback=t,this.playbackRate=O,this._currentIndex=-1;for(var e=0;e<this._steps.length;e++){var i=this._steps[e];a(i.animator)&&i.animator.cancel(t)}return s(this.oncancel)&&this.oncancel(this),this},e.prototype._isInEffect=function(){return this._currentIndex>-1&&this._currentIndex<this._steps.length},e.prototype._getAnimator=function(){var t=this._steps[this._currentIndex];return t.animator?t.animator:(t.animator=this._manager.animate(t.keyframes,t.el,t.timings),t.animator)},e.prototype._playNextStep=function(t){-1===this.playbackRate?this._currentIndex--:this._currentIndex++,this._isInEffect()?this._playThisStep():this.onfinish(t)},e.prototype._playThisStep=function(){var t=this;this._isInEffect()||(-1===this.playbackRate?this._currentIndex=this._steps.length-1:this._currentIndex=0);var e=this._getAnimator();e.onfinish=function(e){t._playNextStep(e)},e.play(this._errorCallback)},e}(),tt=1/30,et=function(){function t(t,e){var i=e.duration;if(!a(i))throw Error("Duration is required");this.playbackRate=0,this.duration=e.duration,this.currentTime=0,this._events=p(e.events,function(e){return new it(t,i,e)}),this._isPaused=!1,this._manager=t,this._tick=this._tick.bind(this),e.autoplay&&this.play()}return t.prototype.finish=function(t){return this._isFinished=!0,this},t.prototype.play=function(t){return this.playbackRate=1,this._isPaused=!1,this._isInEffect?this:(this.playbackRate<0?this.currentTime=this.duration:this.currentTime=0,window.requestAnimationFrame(this._tick),this)},t.prototype.pause=function(t){return this._isInEffect&&(this._isPaused=!0),this},t.prototype.reverse=function(t){return this.playbackRate=-1,this._isPaused=!1,this._isInEffect?this:(this.currentTime<=0&&(this.currentTime=this.duration),window.requestAnimationFrame(this._tick),this)},t.prototype.cancel=function(t){return this.playbackRate=0,this._isCanceled=!0,this},t.prototype._tick=function(){var t=this;if(this._isCanceled)return void this._triggerCancel();if(this._isFinished)return void this._triggerFinish();if(this._isPaused)return void this._triggerPause();this._isInEffect||(this._isInEffect=!0);var e=performance.now(),i=this._lastTick;if(a(i)){var n=(e-i)*this.playbackRate;this.currentTime+=n}return this._lastTick=e,this.currentTime>this.duration||this.currentTime<0?void this._triggerFinish():(f(this._events,function(e){var i=t.playbackRate<0?e.startTimeMs:e.startTimeMs+tt,n=t.playbackRate>=0?e.endTimeMs:e.endTimeMs-tt,r=i<=t.currentTime&&t.currentTime<n;return r?(e.animator.playbackRate=t.playbackRate,e.isInEffect=!0,void e.animator.play()):void(e.isInEffect=!1)}),void window.requestAnimationFrame(this._tick))},t.prototype._triggerFinish=function(){this._reset(),f(this._events,function(t){return t.animator.finish()}),s(this.onfinish)&&this.onfinish(this)},t.prototype._triggerCancel=function(){this._reset(),f(this._events,function(t){return t.animator.cancel()}),s(this.oncancel)&&this.oncancel(this)},t.prototype._triggerPause=function(){this._isPaused=!0,this._isInEffect=!1,this._lastTick=O,this.playbackRate=0,f(this._events,function(t){t.isInEffect=!1,t.animator.pause()})},t.prototype._reset=function(){this.currentTime=0,this._lastTick=O,this._isCanceled=!1,this._isFinished=!1,this._isPaused=!1,this._isInEffect=!1,f(this._events,function(t){t.isInEffect=!1})},t}(),it=function(){function t(t,e,i){var n,r,a;if(i.name){var s=t.findAnimation(i.name),o=m({},s.timings);i.timings&&(r=m(o,i.timings)),n=s.keyframes,r=o,a=i.el}else n=i.keyframes,r=i.timings,a=i.el;var u=e*i.offset,c=u+r.duration,f=c>e;f&&(c=e),this.el=a,this.isClipped=f,this.isInEffect=!1,this.endTimeMs=c,this.keyframes=n,this.offset=i.offset,this.startTimeMs=u,this.timings=r,this._manager=t}return Object.defineProperty(t.prototype,"animator",{get:function(){return a(this._animator)||(this._animator=this._manager.animate(this.keyframes,this.el,this.timings),this._animator.pause()),this._animator},enumerable:!0,configurable:!0}),t}(),nt=[],rt=function(){function t(){var t=this;this._registry={},f(nt,function(e){return t._registry[e.name]=e})}return t.inject=function(t){Array.prototype.push.apply(nt,p(t,g))},t.prototype.animate=function(t,e,i){return new W(this,t,e,i)},t.prototype.animateSequence=function(t){return new $(this,t)},t.prototype.animateTimeline=function(t){return new et(this,t)},t.prototype.findAnimation=function(t){return this._registry[t]||void 0},t.prototype.register=function(t){return this._registry[t.name]=g(t),this},t}();"undefined"!=typeof angular&&angular.module("just.animate",[]).service("just",rt);var at=void 0,st={animate:function(t,e,i){return T().animate(t,e,i)},animateSequence:function(t){return T().animateSequence(t)},animateTimeline:function(t){return T().animateTimeline(t)},findAnimation:function(t){return T().findAnimation(t)},inject:function(t){rt.inject(t)},register:function(t){return T().register(t)}};window.Just=st}();